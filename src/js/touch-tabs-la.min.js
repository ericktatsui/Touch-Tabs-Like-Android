TouchTabsLA=function(n){var t,l,r,s,a=!0,h,o,b=0,v=0,y=0,c,f,e,i=[],p,w=document.createEvent("Event"),u=function(){t=this;this.lastPos=0;this.currentTab=1;this.currentPos=0;this.isActive=!1;this.initializer()};return u.prototype.initializer=function(){n.container&&n.content&&n.tabs&&n.header?(r=n.parent?n.parent:window,r.offsetHeight||(r.offsetHeight=r.innerHeight),r.offsetWidth||(r.offsetWidth=r.innerWidth),h=n.tabs.querySelectorAll("li"),o=n.content.querySelectorAll(".tab-content"),f=h.length,e=r.offsetWidth/f,p=e*.7,s=n.header.offsetHeight,t.createLine().setWidth().createFitings().hammerInit().setTabsClick().setContainerSize().onTabContentScroll().onWindowResize().createEvent(),n.tabs.style.transition="transform 0.3s ease",n.tabs.style.webkitTransition="transform 0.3s ease",n.header.style.transition="transform 0.3s ease",n.header.style.webkitTransition="transform 0.3s ease",n.container.style.transition="transform 0.3s ease",n.container.style.webkitTransition="transform 0.3s ease",t.isActive=!0):(console.error("Touch Tabs L.A: Options 'container', 'content', 'tabs' and 'header' are required. "),t.isActive=!1)},u.prototype.createEvent=function(){return w.initEvent("tabFocused",!0,!0),t},u.prototype.createLine=function(){var i=document.createElement("div");return i.setAttribute("id","stla-line"),n.tabs.appendChild(i),c=document.querySelector("#stla-line"),t},u.prototype.setWidth=function(){e=n.tabs.offsetWidth/f;n.content.style.width=r.offsetWidth*f+"px";for(var i=0;i<=f;i++)o[i]&&h[i]&&(h[i].style.width=e+"px",o[i].style.width=n.container.offsetWidth+"px",o[i].style.left=n.container.offsetWidth*i+"px");return c.style.width=e+"px",t},u.prototype.createFitings=function(){i=[];for(var n=1;n<=f;n++)i.push({min:e*n-p,max:e*n+p,pos:n,posPx:e*(n-1)});return t},u.prototype.setContainerSize=function(){return n.container.style.height=r.offsetHeight-n.tabs.offsetHeight+"px",t},u.prototype.onTabContentScroll=function(){for(var u,e=0,h=0,i=0;i<=f;i++)o[i]&&o[i].addEventListener("scroll",function(t){a=!1;e=h-y;t.srcElement.scrollTop>y?(this.scrollHeight>r.offsetHeight-n.tabs.offsetHeight+20&&(n.tabs.style.webkitTransform="translate3d(0, -"+s+"px, 0)",n.container.style.webkitTransform="translate3d(0, -"+s+"px, 0)",n.header.style.webkitTransform="translate3d(0, -"+s+"px, 0)",n.container.style.height=r.offsetHeight-n.tabs.offsetHeight+"px"),v=0):(n.tabs.style.webkitTransform="translate3d(0, 0, 0)",n.container.style.webkitTransform="translate3d(0, 0, 0px)",n.header.style.webkitTransform="translate3d(0, 0, 0)",n.container.style.height=r.offsetHeight-n.tabs.offsetHeight-s+"px",v=0);clearTimeout(u);u=setTimeout(function(){clearTimeout(u);a=!0;h=t.srcElement.scrollTop;e=0},100);y=t.srcElement.scrollTop});return t},u.prototype.setTabsClick=function(){for(var n=0;n<f;n++)h[n].addEventListener("click",function(n){n.preventDefault();n.stopPropagation();t.goToTab(this.getElementsByTagName("a")[0].getAttribute("href").replace("#tab",""));b=-t.currentPos*f});return t},u.prototype.hammerInit=function(){return l=new window.Hammer(n.content),n.threshold||(n.threshold=0),n.pointers||(n.pointers=1),l.get("pan").set({threshold:n.threshold,pointers:n.pointers,direction:window.Hammer.DIRECTION_HORIZONTAL}),t.setHammerEvents(),t},u.prototype.setHammerEvents=function(){l.on("panmove",function(n){t.touchMove(n)});l.on("panend pancancel",function(n){t.touchEnd(n)})},u.prototype.moveTab=function(t,i){c.style.webkitTransition=t;c.style.webkitTransform="translate3d("+i+"px, 0, 0)";n.content.style.webkitTransition=t;n.content.style.webkitTransform="translate3d("+-i*f+"px, "+v+"px, 0)"},u.prototype.touchMove=function(n){n.deltaX=n.deltaX/f;c.style.transition="none";a&&(t.currentPos+e>=r.offsetWidth-10?(t.moveTab("transform 0.3s ease",e*(f-1)),n.deltaX>0&&(t.currentPos=t.lastPos-n.deltaX,t.moveTab("none",t.currentPos))):t.currentPos<=10?(t.moveTab("transform 0.3s ease",0),n.deltaX<0&&(t.currentPos=t.lastPos-n.deltaX,t.moveTab("none",t.currentPos))):(t.currentPos=t.lastPos-n.deltaX,t.moveTab("none",t.currentPos)))},u.prototype.touchEnd=function(r){if(t.lastPos=t.currentPos,a){if(r.velocityX>.3)t.goToTab(t.currentTab-1,"transform 0.3s ease");else if(r.velocityX<-.3)t.goToTab(t.currentTab+1,"transform 0.3s ease");else{for(var u=0;u<i.length;u++)r.deltaX<0?t.lastPos+e<=i[u].max&&(t.currentPos=i[u].posPx,t.currentTab=i[u].pos,u=i.length):t.lastPos<=i[u].min&&(t.currentPos=i[u].posPx,t.currentTab=i[u].pos,u=i.length);t.lastPos=t.currentPos;t.moveTab("transform 0.3s ease",t.currentPos)}b=-t.currentPos*f;n.onTabChange&&n.onTabChange.call(t);o[t.currentTab-1].dispatchEvent(w)}},u.prototype.onWindowResize=function(){return n.resize==!0&&r.addEventListener("resize",function(){setTimeout(function(){t.setWidth().createFitings().setContainerSize()},1e3);t.moveTab("none",i[t.currentTab-1].posPx);t.currentPos=i[t.currentTab-1].posPx;t.lastPos=t.currentPos}),t},u.prototype.goToTab=function(r,u){var f="transform 0.3s ease";u==!1&&(f="none");i[r-1]&&(t.moveTab(f,i[r-1].posPx),t.currentPos=i[r-1].posPx,t.currentTab=i[r-1].pos,t.lastPos=t.currentPos,n.ontabfocused&&o.ontabfocused.call(t),o[t.currentTab-1].dispatchEvent(w))},new u};
//# sourceMappingURL=touch-tabs-la.min.js.map
